<html>
    <head>
        <meta charset="UTF-8">
        <meta content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
      <title>Bill Generating</title>  
    </head>
    <body>

        <!--Description table-->
        <app-navbar></app-navbar>
    <div class="container">
        
        <div class="container" id="print-section" >
            <div id="pdf-content" #pdfContent style="padding-top:110px;">
        
            <div class="row">
             
                <div class="col">
                    <div class="card" style="width: 15rem;text-align:center;">
                        <img src="assets\logo2.jpg" class="card-img-top" alt="Monara">
                        <div class="card-body">
                          <h5 class="card-title"style="text-align:center;">MONARA CREATIONS (pvt) ltd.</h5>

                          <p class="card-text"id='des'style="font-size:11px;">
                                 No.262,High level Road,<br>
                                Nugegoda.,Sri Lanka.<br>
                                Email : monaracreation@gmail.com<br>
                                Tel : 011 28 22 969 / 011 27 55 832<br>
                                Mob : 076 55 62 725<br>
                                Web : www.monaracreations.lk<br> </p>
                        </div>         
                      </div>
                </div>
                <div class="col">
                        
                            <!--table 1-->

                        <h2 align="center"> <b>Quotation</b></h2>
                        <table class="table" >
                          
                                <tr>
                                    <th>
                                        Quotation date :
                                    </th>
                                    <td align="right">
                                        
                                        <input type="date" class="form-control"name="current-date"[(ngModel)]="formData.st_date" >
                                        
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        Validity :
                                    </th>
                                    <td align="right">
                                        <input type="date" class="form-control"name="validity-date"[(ngModel)]="formData.end_date">
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                      Quotation No.:
                                    </th>
                                    <td>
                                         <input type="text" class="form-control" [(ngModel)]="formData.qu_no" >
                                    </td>
                                </tr>
                           
                        </table>
                       <!-- showing Customer details-->
                       
                            <table class="table">
                                
                                    <tr>
                                        <th>
                                            <div class="mb-2 bg-dark text-white" align="center">Customer Details</div>
                                        </th>
                                    </tr>
                                    <tr>
                                        <td>
                                        <div class="input-group input-group-sm ">
                                            
                                            <input type="text" class="form-control" placeholder="Customer Name" [(ngModel)]="formData.cu_name"required >
                                            <div class="invalid-feedback">Please fill out this field.</div>
                                          </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="input-group input-group-sm ">
                                          <input type="text" class="form-control" placeholder="Address" [(ngModel)]="formData.cu_address" required>
                                        </div>
                                    </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="input-group input-group-sm">
                                          <input type="text" class="form-control" placeholder="Telephone no."[(ngModel)]="formData.cu_tele" required>
                                          <div *ngIf="tele_error" class="error-message">{{ tele_error }}</div>
                                            <div *ngIf="tele_error_fix" class="error-message-ok">{{ tele_error_fix }}</div>
                                        </div>
                                        
                                    </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="input-group input-group-sm ">
                                          <input type="text" class="form-control" placeholder="E-mail"[(ngModel)]="formData.other" >
                                          <div *ngIf="emailerror" class="error-message">{{ emailerror }}</div>
                                            <div *ngIf="emailerror_fix" class="error-message-ok">{{ emailerror_fix }}</div>
                                            </div>
                                            
                                    </td>
                                    </tr>
                                 
                            </table>
                  </div>
            </div>
         

              <div class="row my-2 mx-1 justify-content-center"style="padding-left: 36px;">

                <table class="table table-striped table-borderless">
                  <thead  style="background-color:#222222 ;" class="text-white">
                  <tr>
                    <th scope="col">#</th>
                      <th scope="col"style="text-align:center;">Material</th>
                      <th scope="col"style="text-align:center;">Quantity</th>
                      <th scope="col"style="text-align:center;">Unit Price</th>
                      <th scope="col"style="text-align:center;">Discount</th>
                      <th scope="col"style="text-align:center;">Amount</th>
                      <th scope="col"></th>

                  </tr>
                  </thead>
                  <tbody>
                  <tr *ngFor="let row of rows; let i = index">

                    <td style="text-align:right;">{{row.id}}</td>

                    <td ><select class="form-control" name="name{{i}}"style="width:300px; height:34px;">
                        <option *ngFor="let pname of product_name">{{ pname }}</option>
                     </select></td>

                    <td><input type="number" [(ngModel)]="row.qty" name="qty{{i}}" style="width:110px; height:34px;text-align:center;"class="form-control"></td>

                    <td ><input type="number" list="listid" class="form-control" [(ngModel)]="row.product_price" name="unitprice{{i}}" style="width:120px; height:34px;text-align:center;">
                        <datalist id="listid">
                        <option *ngFor="let price of product_price" [value]="price">{{ price }}</option>
                        </datalist></td>

                    <td ><input type="number" [(ngModel)]="row.discount"  name="discount{{i}}" (input)="calAmount(row, i)" (input)="calcTotalDiscount(rows)" (input)="calSubTotal(rows)" style="width:70px; height:34px;text-align:center;"class="form-control"placeholder="%" step="5"></td>
                    <td ><input type="number" [(ngModel)]="row.amount" name="amount{{i}}"  readOnly style="width:130px; height:34px;text-align:center;"class="form-control"></td>
                    <td ><button type="button" (click)="deleteRow(i)"  class="btn btn-outline-secondary btn-sm" >-</button> </td>
                    
                   
                  </tr>
                </tbody>
                </table>
       
                  
            </div>
                <hr>

              <!--Table 3-->
            <div class="container">
              <div class="row">
                    <div class="col">
                            <table class="table" border="1px">
                                <tr class="bg-dark text-white"align="center">
                                    <th>Special Notes</th>
                                </tr>
                                <tr>
                                    <td><textarea id="are"  rows="2" cols="30" [(ngModel)]="formData.note" name="note" class="form-control" >
                                        </textarea></td>
                                </tr>
                            </table>
                    </div>
                    <div class="col">
                            
                    </div>
                    <div class="col">
                       
                        <table class="table">
                            <tr >
                                <th>Subtotal</th>
                                <div class="mags ">
                                    <td>Rs.</td>
                                <td><input type="number" class="number"  (change)="updateFormData('subtotal', calSubTotal(rows))" [value]="calSubTotal(rows)" name="subtotal" [(ngModel)]="formData.subtotal" step="0.00" value="subtotal" placeholder="00"></td>
                              
                                </div>
                            </tr>
                            <tr>
                                <th>Total Discount</th>
                                <div class="mags ">
                                    <td>Rs.</td>
                                <td ><input type="number" class="number" (change)="updateFormData('discount', calcTotalDiscount(rows))" [value]="calcTotalDiscount(rows)" [(ngModel)]="formData.discount" name="discount" step="0.00" placeholder="00"></td>
                               
                                </div>
                            </tr>
                            <tr>
                                <th>Total</th>     
                                <div class="mags"style="border:1px ">
                                    <td>Rs.</td>
                                <td ><input type="number"  class="number" (change)="updateFormData('total_amount', calculateTotalAmount())"  [(ngModel)]="formData.total_amount"  [value]="calculateTotalAmount()" step="0.00" placeholder="00"></td>
                               
                                </div>
                            </tr>
                    </table>
               
                    </div>
                </div>
              </div>
            </div> 
        </div>
        
        <div class="Container">
            
        </div>
             <hr>
           <br><br>
           
         </div>  
            <ul>
            <div class ="cols btn-group" >
            <li><button type="button" (click)="addRow()" class="btn btn-outline-secondary " >Add Row</button></li>
            <li><button (click)="confirmRefresh()" type="button" class="btn btn-outline-secondary "> Reset </button></li>

           <li><button class="btn btn-warning margin-left"  printSectionId="print-section" [useExistingCss]="true" id="export" ngxPrint >Export</button></li> 
            <li><button  class="btn btn-secondary margin-left" (click)="onSubmit()" >Save </button></li> 
             <li> <button class="btn btn-primary margin-left"id="view" (click)="Billingview()">View & Send</button></li> 
             <!-- <li> <button class="btn btn-secondary margin-left"id="send" (click)="Billingsend()">Mail</button></li>  -->
           <!-- <button  class="btn btn-outline-secondary margin-left" (click)="exportToPDF()">Save PDF</button> -->
        
            </div></ul>
            <br>
            <br>
   
         
        <br>
        <br>
  
</body>

</html>